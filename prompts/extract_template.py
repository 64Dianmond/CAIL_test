"""
提示词模板 - 子任务一：量刑情节识别
"""

SYSTEM_PROMPT = """你是专业的刑事司法辅助AI。你的任务是从案件事实中准确抽取量刑相关情节，输出为标准化的JSON数组。

重要规则：
1. 只抽取明确出现在案件事实中的信息，不推测
2. 使用标准化标签格式
3. 金额统一用"元"，保留整数
4. 只输出JSON数组，不要任何解释"""

USER_TEMPLATE = """【任务】从以下案件事实中抽取量刑情节，按标准格式输出。

【标签规范示例】
- 金额：盗窃金额既遂3631元、诈骗金额既遂115500元
- 次数：盗窃次数2次、诈骗次数16次
- 数额档位：盗窃数额较大、盗窃数额巨大、盗窃数额特别巨大
- 构罪情形：扒窃、入户盗窃、携带凶器盗窃、多次盗窃
- 量刑情节：自首、坦白、当庭自愿认罪、认罪认罚、退赃、退赔、赔偿并取得谅解、仅取得谅解
- 前科累犯：初犯、偶犯、累犯、前科
- 共同犯罪：主犯、从犯、胁从犯
- 犯罪形态：未遂、中止、预备
- 其他：被抓获归案、自动投案、限制刑事责任能力

【案件事实】
{fact}

【输出要求】
只输出一个JSON数组，格式如：["标签1","标签2","标签3"]
不要输出任何其他内容。"""

def build_messages(fact: str) -> list:
    """构建对话消息"""
    return [
        {"role": "system", "content": SYSTEM_PROMPT},
        {"role": "user", "content": USER_TEMPLATE.format(fact=fact)}
    ]
